C51 COMPILER V9.54   MAIN                                                                  12/19/2022 18:58:41 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.h>
   2          #include "timer0.h"
   3          #include "Key.h" 
   4          #include <intrins.h>
   5          
   6          /*
   7          å®šæ—¶å™¨ å±žäºŽå†…éƒ¨èµ„æº
   8          
   9          å®šæ—¶å™¨èµ„æº
  10                  3ä¸ª T0ã€T1ã€T2
  11                  
  12          å››ç§å·¥ä½œæ¨¡å¼
  13                  æ¨¡å¼0 13ä½å®šæ—¶å™¨/è®¡æ•°å™¨
  14                  æ¨¡å¼1 16ä½å®šæ—¶å™¨/è®¡æ•°å™¨(å¸¸ç”¨)
  15                  æ¨¡å¼2 8ä½è‡ªåŠ¨é‡è£…æ¨¡å¼
  16                  æ¨¡å¼3 ä¸¤ä¸ª8ä½è®¡æ•°å™¨
  17                  
  18          æ¨¡å¼1
  19                  ã€TH,TLã€‘-> [0,65535] æº¢å‡ºå€¼æ ‡å¿—ä½TF
  20                  
  21          æ—¶é’Ÿ
  22                  ç³»ç»Ÿæ—¶é’Ÿ    æ™¶æŒ¯å‘¨æœŸ 11.0592MHz  f=1/T  1us è®¡æ•°ä¸€æ¬¡
  23                  C/T 1-C 0-T(*)
  24                  å¤–éƒ¨å¼•è„š    T0 Pin å¤–éƒ¨å¼•è„š
  25          
  26          ä¸­æ–­èµ„æº
  27                  å¤–éƒ¨ä¸­æ–­0ã€å®šæ—¶å™¨0ä¸­æ–­ã€å¤–éƒ¨ä¸­æ–­1ã€å®šæ—¶å™¨1ä¸­æ–­ã€ä¸²å£ä¸­æ–­ã€å®šæ—¶å™¨2ä¸­æ–­ã€å
             -¤–éƒ¨ä¸­æ–­2ã€å¤–éƒ¨ä¸­æ–­3
  28          
  29          ä¸­æ–­ä¼˜å…ˆçº§
  30                  4ä¸ª
  31                  
  32          ä¸­æ–­å·
  33                  ä¸­æ–­æŸ¥è¯¢åºå·å°±æ˜¯ä¸­æ–­å·
  34                  
  35          å®šæ—¶å™¨å’Œä¸­æ–­ç³»ç»Ÿ
  36                  
  37          å®šæ—¶å™¨ç›¸å…³å¯„å­˜å™¨
  38                  å®šæ—¶å™¨/è®¡æ•°å™¨0å’Œ1çš„ç›¸å…³å¯„å­˜å™¨
  39                          TCON
  40                          TMOD
  41                          TL0
  42                          TL1
  43                          TH0
  44                          TH1
  45                  ä¸­æ–­å¯„å­˜å™¨
  46                          IE
  47                          IP
  48          */
  49          /*
  50          å®šæ—¶å™¨ T0
  51          ç³»ç»Ÿé¢‘çŽ‡    11.0592MHz
  52          å®šæ—¶å™¨               å®šæ—¶å™¨0
  53          å®šæ—¶é•¿åº¦    1æ¯«ç§’
C51 COMPILER V9.54   MAIN                                                                  12/19/2022 18:58:41 PAGE 2   

  54          å®šæ—¶å™¨æ¨¡å¼ 16ä½
  55          å®šæ—¶å™¨æ—¶é’Ÿ 12T
  56          */
  57          
  58          
  59          void Timer0_Init()
  60          {
  61   1              // TMOD å·¥ä½œæ¨¡å¼å¯„å­˜å™¨
  62   1              // TMOD=0x01;  // 0000 0001 
  63   1              TMOD=TMOD&0xF0; // ä½Žå››ä½æ¸…é›¶ é«˜å››ä½ä¸å˜
  64   1              TMOD=TMOD|0x01;//  æœ€ä½Žä½ç½®   é«˜å››ä½ä¸å˜
  65   1              
  66   1              // TCON æŽ§åˆ¶å¯„å­˜å™¨
  67   1              TF0=0;  //æ¸…é™¤TF0æ ‡å¿—
  68   1              TR0=1;  //å®šæ—¶å™¨0å¼€å§‹è®¡æ—¶
  69   1      
  70   1              // è®¾ç½®å®šæ—¶åˆå€¼
  71   1              TH0=64535/256;
  72   1              TL0=64535%256;
  73   1              
  74   1              ET0=1;
  75   1              EA=1;  // å¼€æ€»ä¸­æ–­
  76   1              PT0=0;
  77   1      }
  78          
  79          
  80          unsigned char KeyNumber=0,LedMode=0;
  81          void main()
  82          {
  83   1              // Timer0_Init();
  84   1              Timer0Init();
  85   1              P1=0xFE;
  86   1              while (1)
  87   1              {
  88   2                      KeyNumber=Key();
  89   2                      if(KeyNumber!=0)
  90   2                      {
  91   3                              if(KeyNumber==1)
  92   3                              {
  93   4                                      LedMode++;
  94   4                                      if(LedMode>=2)
  95   4                                      {
  96   5                                              LedMode=0;
  97   5                                      }
  98   4                              }
  99   3                      }
 100   2              }// while()ç»“æŸ
 101   1      }
 102          
 103          void Timer0_Routine() interrupt 1
 104          {
 105   1              static unsigned int T0Count=0; // staticé™æ€
 106   1              
 107   1              TH0=64535/256;
 108   1              TL0=64535%256;
 109   1              
 110   1              T0Count++;
 111   1              
 112   1              if(T0Count>=1000)
 113   1              {
 114   2                      T0Count=0;
 115   2                      // P1_0=~P1_0; 
C51 COMPILER V9.54   MAIN                                                                  12/19/2022 18:58:41 PAGE 3   

 116   2                      if(LedMode==0)
 117   2                      {
 118   3                              P1=_crol_(P1,1);
 119   3                      }
 120   2                      if(LedMode==1)
 121   2                      {
 122   3                              P1=_cror_(P1,1);
 123   3                      }
 124   2              }       
 125   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    139    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
